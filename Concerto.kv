#:import webbrowser webbrowser

<DirectScreen>:
    name: 'Direct'
    userIP: userIP
    AnchorLayout:
        anchor_x: 'left'
        anchor_y: 'top'
        canvas.before:
        Image:
            id: background
        GridLayout:
            size_hint: (1, 0.75)
            cols: 1
            spacing: [0,10]
            Label:
                text: 'Concerto (prototyping)'
                font_size: 20
                outline_width: 1
            GridLayout:
                rows: 1
                TextInput:
                    multiline: False
                    id: userIP
                    padding_x: 50
                    foreground_color: (255, 255, 255, 1)
                    background_color: (255, 0, 0, 0.2)
                Button:
                    text: 'JOIN'
                    background_color: (0, 0, 0, 0)
                    outline_width: 1
                    on_press: self.background_color = (100, 0, 0, 0.9)
                    on_release: 
                        self.background_color = (0, 0, 0, 0)
                        root.join(userIP.text)
                    size_hint: (.25,1)
                Button:
                    text: 'WATCH'
                    background_color: (0, 0, 0, 0)
                    outline_width: 1
                    size_hint: (.25,1)
                    on_press: self.background_color = (100, 0, 0, 0.9)
                    on_release: 
                        self.background_color = (0, 0, 0, 0)
                        root.watch(userIP.text)
            Button:
                text: 'HOST VERSUS'
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                padding_x: 50
                background_color: (0, 0, 0, 0)
                outline_width: 1
                on_press: self.background_color = (100, 0, 0, 0.9)
                on_release: 
                    self.background_color = (0, 0, 0, 0)
                    root.host()
            Button:
                text: 'TRAINING'
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                padding_x: 50
                background_color: (0, 0, 0, 0)
                outline_width: 1
                on_press: self.background_color = (100, 0, 0, 0.9)
                on_release: 
                    self.background_color = (0, 0, 0, 0)
                    root.training()
            Button:
                text: 'REPLAY THEATER'
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                padding_x: 50
                background_color: (0, 0, 0, 0)
                outline_width: 1
                on_press: self.background_color = (100, 0, 0, 0.9)
                on_release: 
                    self.background_color = (0, 0, 0, 0)
                    root.replays()
            Button:
                text: 'LOCAL VERSUS'
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                padding_x: 50
                background_color: (0, 0, 0, 0)
                outline_width: 1
                on_press: self.background_color = (100, 0, 0, 0.9)
                on_release: 
                    self.background_color = (0, 0, 0, 0)
                    root.local()
            Button:
                text: 'TOURNAMENT LOCAL VERSUS'
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                padding_x: 50
                background_color: (0, 0, 0, 0)
                outline_width: 1
                on_press: self.background_color = (100, 0, 0, 0.9)
                on_release: 
                    self.background_color = (0, 0, 0, 0)
                    root.tournament()

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'
        Button:
            text: 'WIKI'
            background_color: (0, 0, 0, 0)
            outline_width: 1
            on_press: self.background_color = (100, 0, 0, 0.9)
            on_release: 
                self.background_color = (0, 0, 0, 0)
                webbrowser.open('https://wiki.gbl.gg/w/Melty_Blood/MBAACC')
            size_hint: (0.1, 0.1)

<GameModal>
    modalTxt: modalTxt
    closeBtn: closeBtn
    size_hint: None,None
    size: 400,150
    auto_dismiss: False   
    BoxLayout:
        padding: 20,20
        orientation: 'vertical'
        Label:
            id: modalTxt
        Button:
            text: 'Close'
            id: closeBtn

<FrameModal>
    frameTxt: frameTxt
    r_input: r_input
    d_input: d_input
    startBtn: startBtn
    closeBtn: closeBtn
    size_hint: None,None
    size: 400,200
    auto_dismiss: False
    GridLayout:
        cols: 1
        padding: 20,20
        row_force_default: True
        row_default_height: 30
        spacing: [0,10]  
        Label:
            id: frameTxt
        BoxLayout:
            Label:
                text: 'Rollback:'
            TextInput
                multiline: False
                id: r_input
                input_filter: 'int'
            Label:
                text: 'Delay:'
            TextInput
                multiline: False
                id: d_input
                input_filter: 'int'
        Button:
            text: 'Start'
            id: startBtn
        Button:
            text: 'Close'
            id: closeBtn